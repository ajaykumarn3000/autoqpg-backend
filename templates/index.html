<!-- download-page.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Download PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  </head>
  <body>
    <button id="download-btn">Download PDF</button>

    <script>
      document
        .getElementById("download-btn")
        .addEventListener("click", function () {
          // Load the first webpage (webpage.html) into an iframe
          console.log("Downloading PDF...");
          fetch("paper.html")
            .then((response) => response.text())
            .then((html) => {
              // Create a temporary element to hold the HTML content
              let container = document.createElement("div");
              container.innerHTML = html;

              // Extract the part of the page you want to convert (e.g., the content inside <div id="content-to-pdf">)
              let content = container.querySelector("body");
              console.log(content);

              // Use html2pdf.js to download it as a PDF
              html2pdf()
                .from(html)
                .set({
                  margin: 0.7,
                  filename: "webpage.pdf",
                  html2canvas: { scale: 2 },
                  jsPDF: { unit: "in", format: "a4", orientation: "portrait" },
                })
                .save();
            })
            .catch((error) => console.log("Error loading webpage:", error));
        });
    </script>
  </body>
</html>
